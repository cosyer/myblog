<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
1
<title>HTML5 Canvas下雪效果插件</title>
<link rel="stylesheet" type="text/css" href="css/style.css">
<link rel="stylesheet" type="text/css" href="css/animate.css">
</head>
<body>

<canvas width="100%" height="100%" class="flare"></canvas>
<canvas width="100%" height="100%" class="snow"></canvas>
<canvas width="100%" height="100%" class="flake"></canvas>

<div class="container"> 
  <input id="btn" value="计算"/>
  <div class="button">
    开始
  </div>
</div>


<script type="text/javascript" src="js/jquery-1.9.1.js"></script>
<script type="text/javascript" src="js/jquery.let_it_snow.js"></script>
<script>
$(document).ready( function() {

   $("canvas.flare").let_it_snow({

      windPower: 0,

      speed: 0,

      color: "#392F52",

      size:120,

      opacity: 0.00000001,

      count: 40,

      interaction: false

    });

    $("canvas.snow").let_it_snow({

        windPower: 3,

        speed: 1,

        count: 250,

        size: 0,

    });

    $("canvas.flake").let_it_snow({

        windPower: -3,

        speed: 1,

        count: 20,

        size: 10,

        image: "images/white-snowflake.png"

    });

    

});

</script>
<script>
    $('.button').click(function(){

          $(this).addClass('big');
          var html = '<ul class="con-ul">'+
                        '<li class="animated fadeInLeft">'+
                          '<input type="text" placeholder="请输入利率" class="input-li page" >'+
                        '</li>'+
                        '<li class="animated fadeInLeft">'+
                          '<input type="text" placeholder="请输入保险金额" class="input-li money">'+
                        '</li>'+
                        '<li class="animated fadeInLeft">'+
                          '<input type="text" placeholder="请输入投保人年龄" class="input-li age">'+
                        '</li>'+
                        '<li class="animated fadeInLeft">'+
                          '<input type="text" placeholder="请输入缴费期" class="input-li time">'+
                        '</li>'+
                        '<li class="animated fadeInLeft">'+
                          '<input type="text" placeholder="请输入责任金时刻" class="input-li mtime">'+
                        '</li>'+
                        '<li class="animated fadeInLeft">'+
                          '<input type="radio" name="gender" value="男" checked="checked" class="radio"/>男<input type="radio" name="gender" value="女" class="radio" />女'+
                        '</li>'+
                    '</ul>';
          setTimeout(function(){
            $('#btn').before(html);
            $('#btn').fadeIn();
          },2000);
          
    });


    $('#btn').click(function(){
        var m;
        if($(".radio:checked").val()=='男'){
            m = [1000000,996963,994813,993210,991968,990976,990163,989480,988893,988379,987916,98484,987058,986606,986097,985502,984806,984007,983114,982150,981140,980111,979084,978075,977094,976144,975222,974320,973428,972535,971627,970692,969714,968682,967582,966400,965123,963737,962229,960583,958785,956819,954666,952308,949724,946893,943791,940393,936670,932594,928133,923251,917911,912075,905699,898738,891144,882867,873853,864047,853391,841825,829288,815720,801060,785247,768225,749942,730349,709410,687094,663386,638287,611815,584010,554939,524694,493399,461211,428319,394946,361348,327810,294641,262166,230719,200629,172210,145745,121473,99580,80182,63325,48979,37041,27344,19668,13760,9345,6148,3911,2400,1418,805,438,228];
        }else{
            m = [ 1000000,997235,995381,994073,993113,992384,991815,991361,990989,990677,990406,990159,989921,989676,989410,989111,988774,988396,987980,987531,987056,986563,986059,985549,985037,984526,984015,983503,982987,982463,981927,981371,980790,980177,979524,978825,978069,977250,976356,975379,674308,973131,971836,970409,968837,967103,965189,963077,960747,958175,955337,952206,948752,944944,940746,936122,931029,925424,919260,912485,905045,896880,887929,878127,867406,855694,842919,829007,813883,797473,779707,760518,739848,717645,693875,668514,641565,613049,583019,551561,518795,484885,450033,414489,378544,342527,306805,271766,237813,205349,174756,146380,150512,97368,77088,59685,45122,33242,23817,16560,11150,7253,4547,2741,1585,877 ];
        }
         
        
        
      var x,n,t;
      var y=0,z=0,s=0,r=0,v,o,p;
      var i = parseFloat($('.page').val());
      var a = parseFloat($('.money').val());
      var x = parseFloat($('.age').val());
      var h = parseFloat($('.time').val());
      var t = parseFloat($('.mtime').val());
      // var i = 0.06;
      // var a = 10;
      // var x = 50;
      // var h = 30;
      // var t = 40;
      n=105-x;
      v=1/(1+i);
      for(var k=0;k<n;k++)
      { 
         y=Math.pow(v,k+1)*(m[x+k]-m[x+k+1])/m[x]+y;
      }
      //此处计算终身寿险保险人给付的精算现值
      for(var k=0;k<h;k++)
      {
         z=Math.pow(v,k)*m[x+k]/m[x]+z;
      }
      p=a*y/z;//此处计算出均衡净保费
      alert('净保费为'+p);
      if(t>h){
        for(var k=0;k<n;k++){  
            if((x+k+t+1)<=105){
              console.log((x+k+t)+','+(x+k+t+1)+','+(x+t));
                s=Math.pow(v,k+1)*(m[x+k+t]-m[x+k+t+1])/m[x+t]+s;
            }    
            
        }
        o=s;
      }else{
        for(var k=0;k<h-t-1;k++){
          if((x+k+t+1)<=105){
            console.log((x+k+t)+','+(x+k+t+1)+','+(x+t));
                s=Math.pow(v,k+1)*(m[x+k+t]-m[x+k+t+1])/m[x+t]+s;
                r=p*Math.pow(v,k)*m[x+k+t]/m[x+t]+r;    
            }    
          // console.log((x+k+t)+','+(x+k+t+1)+','+(x+t))
          
        }
        o=s-r;
      }
      alert('责任准备金为'+o);
    });
    


</script>
</body>
</html>